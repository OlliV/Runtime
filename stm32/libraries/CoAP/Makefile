#
# Copyright (c) 2014 ELL-i co-operative
#
# Compile and assemble the Arduino CoAP library
#

TOP ?= ../../

MAKEDIR ?= $(TOP)make/

#
# Define the variant to build for
#
PLATFORM ?= arduino
VARIANT  ?= ellduino

#
# Define the library name
#

LIB ?= CoAP

#
# Define source directories
#

vpath %.cpp . ./arch/enc28j60 ./arch/stm32
vpath %.c   . ./arch/enc28j60 ./arch/stm32

#
# Define app library objects.  Add new objects here.
#

LIB_OBJS := eth_input.o arp_input.o
LIB_OBJS += network_config.o ip_input.o ip_output.o icmp_input.o ip_checksum.o
LIB_OBJS += udp.o qotd.o coap_input.o coap_handle.o
LIB_OBJS += modbus/modbus_udp.o modbus/modbus_read_iregisters.o modbus/modbus_write_register.o modbus/modbus_read_devid.o
LIB_OBJS += enc28j60_init.o ethernet_output.o

#
# Set up the compilation environment, identical to the Arduino IDE,
# for Arduino lib building.
#
include $(MAKEDIR)lib.mk
